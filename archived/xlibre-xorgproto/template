# Template file for 'mirror.fdo.xorgproto'
pkgname=xlibre-xorgproto
version=2025.1
_pkgname=xorgproto
revision=1
build_style=meson
configure_args="-Dlegacy=true"
hostmakedepends="xlibre-xorg-macros"
# makedepends=""
short_desc="X Window System Unified Protocol"
maintainer="Sofiya <sofiya@v.org>"
license="MIT"
homepage="https://github.com/X11Libre/mirror.fdo.xorgproto"
distfiles="https://github.com/X11Libre/mirror.fdo.xorgproto/archive/refs/tags/${_pkgname}-${version}.tar.gz"
checksum=185f272819d70adba383245995b99bce21e7b1f25bded669debbee1a519ad744
replaces="bigreqsproto>=0 compositeproto>=0 damageproto>=0 dmxproto>=0 dri2proto>=0
 dri3proto>=0 fixesproto>=0 fontsproto>=0 glproto>=0 inputproto>=0 kbproto>=0 presentproto>=0
 printproto>=0 randrproto>=0 recordproto>=0 renderproto>=0 resourceproto>=0 scrnsaverproto>=0
 videoproto>=0 xcmiscproto>=0 xextproto>=0 xf86dgaproto>=0 xf86driproto>=0 xf86miscproto>=0
 xf86vidmodeproto>=0 xineramaproto>=0 xproto>=0 xf86bigfontproto>=0 fontcacheproto>=0"
provides="bigreqsproto-${version}_${revision} compositeproto-${version}_${revision}
 damageproto-${version}_${revision} dmxproto-${version}_${revision}
 dri2proto-${version}_${revision} dri3proto-${version}_${revision}
 fixesproto-${version}_${revision} fontsproto-${version}_${revision}
 glproto-${version}_${revision} inputproto-${version}_${revision}
 kbproto-${version}_${revision} presentproto-${version}_${revision}
 printproto-${version}_${revision} randrproto-${version}_${revision}
 recordproto-${version}_${revision} renderproto-${version}_${revision}
 resourceproto-${version}_${revision} scrnsaverproto-${version}_${revision}
 videoproto-${version}_${revision} xcmiscproto-${version}_${revision}
 xextproto-${version}_${revision} xf86dgaproto-${version}_${revision}
 xf86driproto-${version}_${revision} xf86miscproto-${version}_${revision}
 xf86vidmodeproto-${version}_${revision} xineramaproto-${version}_${revision}
 xproto-${version}_${revision} xf86bigfontproto-${version}_${revision}
 fontcacheproto-${version}_${revision}"
conflicts="xorgproto"
replaces="xorgproto>=0"

post_install() {
	for license in COPYING-* ; do
		vlicense $license
	done

	for doc in *.txt ; do
		vdoc $doc
	done

	vdoc PM_spec

	rm -f ${DESTDIR}/usr/share/doc/${pkgname}/meson_options.txt
	rm -f ${DESTDIR}/usr/include/X11/extensions/{apple,windows}*
	rm -f ${DESTDIR}/usr/share/licenses/${pkgname}/COPYING-{apple,windows}wmproto
	rm -f ${DESTDIR}/usr/share/pkgconfig/{apple,windows}wmproto.pc

	# provided by libX11-devel
	rm -f ${DESTDIR}/usr/include/X11/extensions/XKBgeom.h
}
